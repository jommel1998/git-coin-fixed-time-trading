<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GitCoin | Fixed Time Trading</title>
    <style>
        :root { --bg: #0d1117; --card: #161b22; --green: #2ea043; --red: #f85149; --text: #c9d1d9; --border: #30363d; --yellow: #f0b90b; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { background: var(--bg); color: var(--text); font-family: monospace; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        header { padding: 10px 15px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; height: 60px; flex-shrink: 0; }
        .header-right { display: flex; align-items: center; gap: 10px; }
        
        main { display: flex; flex: 1; overflow: hidden; }
        #chart-container { flex: 1; position: relative; background: #080a0d; border-right: 1px solid var(--border); min-height: 0; }
        canvas { width: 100%; height: 100%; display: block; }

        #sidebar { width: 320px; background: var(--card); padding: 20px; display: flex; flex-direction: column; gap: 15px; overflow-y: auto; }
        .price { font-size: 1.8rem; font-weight: bold; margin-bottom: 5px; }
        
        .btn { padding: 15px; border: none; border-radius: 6px; color: white; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-long { background: var(--green); }
        .btn-short { background: var(--red); }
        .help-btn { background: #21262d; color: var(--text); border: 1px solid var(--border); border-radius: 50%; width: 32px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        
        input { background: var(--bg); border: 1px solid var(--border); color: white; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 1rem; width: 100%; }
        #log { font-size: 0.75rem; color: #8b949e; border-top: 1px solid var(--border); padding-top: 10px; flex: 1; overflow-y: auto; min-height: 100px; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); overflow-y: auto; }
        .modal-content { background: var(--card); margin: 20px auto; padding: 25px; border: 1px solid var(--border); width: 90%; max-width: 550px; border-radius: 8px; line-height: 1.5; }
        .warning-text { color: var(--red); font-weight: bold; border: 1px solid var(--red); padding: 10px; border-radius: 4px; margin-top: 15px; }

        @media (max-width: 850px) {
            main { flex-direction: column; }
            #sidebar { width: 100%; height: 50%; border-left: none; border-top: 1px solid var(--border); }
            #chart-container { height: 50%; flex: none; border-right: none; }
            .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        }
    </style>
</head>
<body>

<div id="helpModal" class="modal">
    <div class="modal-content">
        <h2 style="color: var(--yellow); margin-top: 0;">How to Win (Mechanics)</h2>
        <ul style="padding-left: 20px;">
            <li><strong>1. Prediction:</strong> Choose if the price will go UP or DOWN from the current point.</li>
            <li><strong>2. LONG (Green):</strong> You win if the price is higher than your entry after 4 seconds.</li>
            <li><strong>3. SHORT (Red):</strong> You win if the price is lower than your entry after 4 seconds.</li>
            <li><strong>4. Trend Tip:</strong> Use the Yellow Line (Moving Average). If candles are above it, the trend is likely UP.</li>
        </ul>

        <hr style="border: 0; border-top: 1px solid var(--border); margin: 20px 0;">

        <h3 style="color: var(--yellow)">Reality Check</h3>
        <p><strong>Real Crypto (Spot):</strong> In real life, buying Bitcoin means you actually <strong>own</strong> the asset. You only lose if the price drops and you sell.</p>
        <p><strong>This App:</strong> This is "Fixed Time Trading." You are betting on a 4-second result. If the price moves against you by even $0.01, you lose the bet.</p>
        <p><strong>Price Origin:</strong> This uses a random algorithm. Real market prices are driven by Millions of people.</p>

        <div class="warning-text">⚠️ DISCLAIMER: This is a SIMULATION. You will likely go broke if you think real trading is this fast or simple!</div>
        <button class="btn btn-long" style="width: 100%; margin-top: 20px;" onclick="closeHelp()">I UNDERSTAND</button>
    </div>
</div>

<header>
    <div style="font-weight: bold;">git-coin-fixed-time-trading</div>
    <div class="header-right">
        <div id="balance-display" onclick="resetWallet()" style="background: #21262d; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">Wallet: $1,000</div>
        <button class="help-btn" onclick="openHelp()">?</button>
    </div>
</header>

<main>
    <div id="chart-container">
        <div style="position:absolute; top:10px; left:15px; pointer-events:none; z-index: 5;">
            <div style="font-size: 0.6rem; opacity: 0.6;">BTC / USDT • LIVE</div>
            <div id="current-price" class="price" style="color:var(--green)">45000.00</div>
        </div>
        <canvas id="tradingCanvas"></canvas>
    </div>

    <aside id="sidebar">
        <div>
            <label style="font-size: 0.7rem; color: #8b949e;">TRADE AMOUNT</label>
            <input type="number" id="bet" value="100">
        </div>
        <div class="btn-group">
            <button class="btn btn-long" onclick="trade('long')">LONG</button>
            <button class="btn btn-short" onclick="trade('short')">SHORT</button>
        </div>
        <div id="log">> Terminal Online...</div>
    </aside>
</main>

<script>
    const canvas = document.getElementById('tradingCanvas');
    const ctx = canvas.getContext('2d');
    const logEl = document.getElementById('log');
    
    let candles = [];
    let balance = 1000;
    let lastClose = 45000;

    function openHelp() { document.getElementById('helpModal').style.display = "block"; }
    function closeHelp() { document.getElementById('helpModal').style.display = "none"; }
    
    function resetWallet() {
        if(balance <= 0) {
            balance = 1000;
            updateUI();
            addLog("Wallet Reset to $1,000", "#58a6ff");
        }
    }

    function updateUI() {
        document.getElementById('balance-display').innerText = `Wallet: $${balance.toLocaleString()}`;
    }

    for(let i=0; i<60; i++) { createNewCandle(); }

    function createNewCandle() {
        const open = lastClose;
        const close = open + (Math.random() - 0.5) * 80;
        const high = Math.max(open, close) + Math.random() * 20;
        const low = Math.min(open, close) - Math.random() * 20;
        candles.push({ open, high, low, close });
        lastClose = close;
        if(candles.length > 50) candles.shift();
    }

    function draw() {
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        ctx.fillStyle = "#0d1117";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        const paddingRight = 70; 
        const paddingVertical = 40;
        const chartWidth = canvas.width - paddingRight;
        const chartHeight = canvas.height - (paddingVertical * 2);
        const candleWidth = chartWidth / candles.length;

        const allPrices = candles.flatMap(c => [c.high, c.low]);
        const minPrice = Math.min(...allPrices) * 0.999;
        const maxPrice = Math.max(...allPrices) * 1.001;
        const priceRange = maxPrice - minPrice;

        function getY(p) { return canvas.height - paddingVertical - ((p - minPrice) / priceRange) * chartHeight; }

        // Grid
        ctx.strokeStyle = "#161b22"; ctx.lineWidth = 1;
        for (let i = 0; i <= 6; i++) {
            let p = minPrice + (priceRange * (i/6));
            let y = getY(p);
            ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(chartWidth, y); ctx.stroke();
            ctx.fillStyle = "#484f58"; ctx.font = "10px monospace"; ctx.fillText(p.toFixed(0), chartWidth + 5, y + 4);
        }

        

        // Candles
        candles.forEach((c, i) => {
            let x = i * candleWidth + (candleWidth * 0.2);
            let w = candleWidth * 0.6;
            let color = c.close >= c.open ? "#2ea043" : "#f85149";
            ctx.strokeStyle = color; ctx.fillStyle = color;
            ctx.beginPath(); ctx.moveTo(x + w/2, getY(c.high)); ctx.lineTo(x + w/2, getY(c.low)); ctx.stroke();
            ctx.fillRect(x, Math.min(getY(c.open), getY(c.close)), w, Math.max(1, Math.abs(getY(c.open) - getY(c.close))));
        });

        // Moving Average (Yellow Line)
        ctx.strokeStyle = "#f0b90b"; ctx.lineWidth = 1.5; ctx.beginPath();
        for(let i=7; i < candles.length; i++) {
            let avg = 0; for(let j=0; j<7; j++) avg += candles[i-j].close;
            let y = getY(avg/7); let x = i * candleWidth + (candleWidth/2);
            if(i==7) ctx.moveTo(x, y); else ctx.lineTo(x, y);
        }
        ctx.stroke();

        requestAnimationFrame(draw);
    }

    setInterval(() => {
        const c = candles[candles.length - 1];
        const move = (Math.random() - 0.5) * 15;
        c.close += move;
        c.high = Math.max(c.high, c.close);
        c.low = Math.min(c.low, c.close);
        document.getElementById('current-price').innerText = c.close.toFixed(2);
        document.getElementById('current-price').style.color = c.close >= c.open ? "#2ea043" : "#f85149";
        if (Math.random() > 0.9) createNewCandle();
    }, 600);

    function trade(side) {
        const amt = Number(document.getElementById('bet').value);
        if (amt > balance) return addLog("Insufficient Funds!", "#f85149");
        if (amt <= 0) return;

        balance -= amt;
        updateUI();
        
        const entry = candles[candles.length - 1].close;
        addLog(`Opened ${side.toUpperCase()} @ ${entry.toFixed(0)}`, "#c9d1d9");
        
        setTimeout(() => {
            const exit = candles[candles.length - 1].close;
            const win = side === 'long' ? exit > entry : exit < entry;
            if(win) {
                const profit = amt * 1.9;
                balance += profit;
                addLog(`WIN: +$${(amt * 0.9).toFixed(0)}`, "#2ea043");
            } else {
                addLog(`LOSS: -$${amt}`, "#f85149");
            }
            updateUI();
        }, 4000);
    }

    function addLog(msg, color) {
        const div = document.createElement('div');
        div.style.color = color; div.innerText = `> ${msg}`; 
        logEl.prepend(div);
    }

    draw();
    updateUI();
</script>
</body>
</html>
